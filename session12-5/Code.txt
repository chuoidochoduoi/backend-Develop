CREATE OR REPLACE FUNCTION log_employee_changes()
RETURNS TRIGGER 
LANGUAGE plpgsql
AS $$
BEGIN
    IF (OLD.name <> NEW.name OR OLD.position <> NEW.position) THEN
        INSERT INTO employee_log (emp_name, action_time)
        VALUES (NEW.name, NOW());
    END IF;
    
    RETURN NEW;
END;
$$;

CREATE TRIGGER trg_after_update_employee
AFTER UPDATE ON employees
FOR EACH ROW
EXECUTE FUNCTION log_employee_changes();