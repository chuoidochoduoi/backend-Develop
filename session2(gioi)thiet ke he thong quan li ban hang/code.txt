set search_path to sales;

create table Customers(
                          customer_id  serial primary key,
                          first_name varchar(50) not null,
                          last_name varchar(50)not null,
                          email varchar(150) unique not null,
                          phone varchar(15) check (phone ~ '^[0-9]*$')

);
create table Products (
                          product_id serial primary key ,
                          product_name varchar(100)  not null ,
                          price numeric not null ,
                          stock_quantity int not null
);
create table Orders(
                       order_id serial primary key ,
                       customer_id int not null,
                       order_date timestamp not null default current_timestamp,
                       foreign key (customer_id) references Customers(customer_id)
);
create table OrderItems(
                           order_item_id serial primary key ,
                           order_id int not null ,
                           product_id int not null ,
                           quantity  int check ( quantity >0 ) not null ,
                           foreign key (order_id) references  Orders(order_id),
                           foreign key (product_id) references  Products(product_id)
);